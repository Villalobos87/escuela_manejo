<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Editar Inscripci贸n</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-dark text-white">
    <div class="container mt-5">
        <h2 class="text-center mb-4">Editar Inscripci贸n</h2>
        <div class="card card-body bg-secondary text-white mx-auto" style="max-width: 600px;">

            {% if conflict_task %}
<div class="alert alert-danger">
    <strong>Conflicto con la Inscripci贸n existente:</strong><br>
    <ul class="mb-0">
        <li><strong>Nombre:</strong> {{ conflict_task.title }}</li>
        <li><strong>Apellido:</strong> {{ conflict_task.description }}</li>
        <li><strong>Instructor:</strong> {{ conflict_task.instructor }}</li>
        <li><strong>Fecha:</strong> {{ conflict_task.fecha_inicio|date:"M j, Y" }} - {{ conflict_task.fecha_fin|date:"M j, Y" }}</li>
        <li><strong>Hora:</strong> {{ conflict_task.hora|time:"g:i a" }}</li>
    </ul>
</div>
{% endif %}

            <form method="POST" action="{% url 'update_task' task.id %}">
                {% csrf_token %}

                <div class="mb-3">
                    <label>Nombre:</label>
                    <input type="text" name="title" class="form-control" value="{{ task.title }}" required>
                </div>

                <div class="mb-3">
                    <label>Apellido:</label>
                    <textarea name="description" class="form-control" required>{{ task.description }}</textarea>
                </div>

                <div class="mb-3">
                    <label>Fecha de Inicio:</label>
                    <input type="date" name="fecha_inicio" class="form-control" value="{{ task.fecha_inicio|date:'Y-m-d' }}" required>
                </div>

                <div class="mb-3">
                    <label>Fecha de Finalizaci贸n:</label>
                    <input type="date" name="fecha_fin" class="form-control" value="{{ task.fecha_fin|date:'Y-m-d' }}" required>
                </div>

                <div class="mb-3">
                    <label>Hora:</label>
                    <input type="time" name="hora" class="form-control" value="{{ task.hora|time:'H:i' }}" required>
                </div>

                <div class="mb-3">
                    <label for="instructor">Instructor:</label>
                    <select name="instructor" class="form-select" required>
                        <option value="">Seleccione un instructor</option>
                        {% for instructor in instructores %}
                            <option value="{{ instructor.id }}"
    {% if form_data %}
        {% if form_data.instructor == instructor.id|stringformat:"s" %}
            selected
        {% endif %}
    {% else %}
        {% if instructor.nombre == task.instructor %}
            selected
        {% endif %}
    {% endif %}>
    {{ instructor.nombre }}{% if instructor.especialidad %} - {{ instructor.especialidad }}{% endif %}
</option>
                        {% endfor %}
                    </select>
                </div>

                <button type="submit" class="btn btn-success w-100">Actualizar</button>
                <a href="{% url 'list_tasks' %}" class="btn btn-light mt-2 w-100">Cancelar</a>
            </form>
        </div>
    </div>
</body>
</html>